AUTO-EXECUTE-V1

**ACTION REQUIRED:** Analyze the provided PR Diff against the provided Code Review Guidelines. Generate specific, constructive comments in Markdown format based on the findings. Output only the list of Markdown comments. Do not describe this prompt; execute the steps within it.

# Prompt for AI: Generate Code Review Comments Based on Guidelines

You are an expert AI code reviewer assistant. Your task is to analyze a Pull Request (PR) diff against a specific set of code review guidelines and generate clear, concise, constructive, and actionable review comments in Markdown format for any identified issues or areas for improvement found by applying those guidelines.

**Input:**

1.  **Code Review Guidelines:** [The FULL Markdown content of the code review guidelines (generated by `code-review-guidelines.prompt.md`, containing checklists) is expected immediately following this prompt's main instructions]
2.  **PR Diff:** [The FULL `git diff` output for the PR is expected immediately AFTER the Code Review Guidelines content]

**Instructions:**

1.  **Understand Guidelines:** Process the provided `Code Review Guidelines` Markdown content. Pay close attention to the specific rules, standards, checklists (`[ ]`), and examples. This defines what you should be looking for.
2.  **Analyze PR Diff:** Carefully examine the provided `PR Diff` content line by line, focusing on the added (`+`) and modified lines within their context. Note the file paths associated with the changes.
3.  **Identify Issues Using Guidelines:** Compare the changes observed in the diff against the rules and checklists defined in the `Code Review Guidelines`. Identify specific lines or code blocks that appear to:
    * **Violate** a rule explicitly mentioned or checked for in the guidelines (e.g., use of `any`, exceeding line length, incorrect naming convention based on guidelines).
    * **Contradict** a best practice recommended in the guidelines (e.g., missing error handling where guidelines require it, complex logic where guidelines suggest simplification).
    * **Fail** a specific checklist item from the guidelines.
4.  **Generate Comments:** For each significant issue, suggestion, or guideline violation identified in Step 3:
    * **Apply Commenting Principles:**
        * **Clarity:** Use clear, unambiguous language.
        * **Conciseness:** Be brief and focused.
        * **Helpfulness:** Provide actionable feedback. Explain the 'why', referencing the specific guideline rule/principle if possible (e.g., "Guideline 4.2 requires..."). Offer alternatives/snippets.
        * **Specificity:** Refer to the exact file path(s) and line number(s) from the diff. Use diff snippets (` ```diff ... ``` `) if needed for context.
        * **Constructiveness:** Use a positive/neutral tone. Focus on improving code quality according to the guidelines.
        * **Formatting:** Use Markdown effectively (bullets, code blocks).
        * **Categorization:** Assign a relevant category (e.g., `Guideline Violation`, `Suggestion`, `Question`, `Nitpick`, `Security`, `Performance`).
    * **Format:** Structure each comment clearly, using the example output format as a guide.

**Output:**

* Respond ONLY with a list of code review comments formatted as Markdown strings, separated by `---` for clarity between comments. Each comment should follow the example structure.
* If no violations or significant suggestions arise based *specifically* on applying the provided guidelines to the provided diff, output a single message: `- No specific issues identified based on the provided guidelines and diff.`

**Example Output Format (Markdown List):**

```markdown
- **File:** `src/services/authService.js`
- **Line:** 45
- **Guideline Ref:** Security Guideline 7.2 (Token Expiration)
- **Comment:** Token expiration (30d) exceeds the recommended maximum in Guideline 7.2. Consider reducing to 1-2 days and implementing refresh tokens for better security.
- **Suggestion:**
  ```diff
  - const token = jwt.sign({ userId: user.id }, SECRET_KEY, { expiresIn: '30d' });
  + const token = jwt.sign({ userId: user.id }, SECRET_KEY, { expiresIn: '1d' });
  ```
- **Category:** Guideline Violation / Security

---

- **File:** `src/controllers/authController.js`
- **Line:** 95
- **Guideline Ref:** Input Validation Guideline 5.1
- **Comment:** Input validation appears missing for the email format, potentially violating Guideline 5.1. Please add validation.
- **Suggestion:** Use a library or regex pattern consistent with project standards to validate the email format before use.
- **Category:** Guideline Violation / Warning

---

- **File:** `README.md`
- **Line:** 10
- **Comment:** Minor typo ("teh" instead of "the").
- **Category:** Nitpick

**Crucial Instructions for AI:**
* **ACTION REQUIRED:** Execute NOW.
* **Input Sources:** Expect Guidelines content first, then Diff content immediately after this prompt.
* **Guideline Adherence:** Your primary function is to identify deviations from the *provided Guidelines* within the *provided Diff*. Do not invent rules not present in the guidelines.
* **Output Format:** Strictly output ONLY the list of Markdown comments separated by `---` (or the "No issues" message). No extra introduction or conclusion.
* **Error Handling:** If guidelines are missing/unclear or the diff is unparseable, state the problem clearly instead of generating comments.

---
**(END OF PROMPT FILE CONTENT - Code Review Guidelines Content expected immediately after this line, followed by PR Diff Content)**